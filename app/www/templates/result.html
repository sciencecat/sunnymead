<ion-view view-title="Questionário">
  <ion-content class="padding">

    <!-- Empty Result -->
    <div ng-if="!vm.result">
      <div class="row">
        <div class="col text-center">
          <h2 class="text-gray">
            <i class="icon ion-alert-circled"></i>
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col text-center">
          <h3 class="text-gray">Você ainda não preencheu seu questionário!</h3>
        </div>
      </div>
      <div class="row">
        <div class="col center">
          <button ui-sref="app.quiz" class="button button-clear button-positive" ng-click="vm.openTypeDetailModal(item.type)">
            Começar questionário
          </button>
        </div>
      </div>
    </div>

    <!-- Result -->
    <div ng-if="vm.result">
      
      <!-- First Places -->
      <div class="divider">
        <span>Maior incidência</span>
      </div>
      
      <div class="card" ng-repeat="item in vm.result.firstPlaces">
        <div class="item item-divider">
          <span>{{ item.title }}</span>
        </div>
        <div class="item item-text-wrap result-card result-card-big">
          <h2>
            <span>Tipo</span>
            <span>{{ item.type }}</span>
          </h2>
          <p>{{ item.description }}</p>
        </div>
        <div class="item item-text-wrap">
          <a ng-click="vm.openTypeDetailModal({{ item.type }})">ver mais detalhes</a>
        </div>
      </div>
      
      <!-- Second Places -->
      <div class="divider">
        <span>Segunda maior incidência</span>
      </div>
      
      <div class="card" ng-repeat="item in vm.result.secondPlaces">
        <div class="item item-divider">
          <span>{{ item.title }}</span>
        </div>
        <div class="item item-text-wrap result-card">
          <h2>
            <span>Tipo</span>
            <span>{{ item.type }}</span>
          </h2>
          <p>{{ item.description }}</p>
        </div>
        <div class="item item-text-wrap">
          <a ng-click="vm.openTypeDetailModal({{ item.type }})">ver mais detalhes</a>
        </div>
      </div>
      
      <!-- Chart -->
      <div class="divider">
        <span>Pontuação</span>
      </div>
      
      <canvas id="radar"
              width="100%"
              height="100%"
              class="chart chart-radar"
              chart-data="vm.chartData"
              chart-options="vm.chartOptions"
              chart-labels="vm.chartLabels">
      </canvas>
      
      <canvas id="hidden-radar"
              width="500"
              height="500"
              class="chart chart-radar hidden"
              chart-data="vm.chartData"
              chart-options="vm.chartOptionsFull"
              chart-labels="vm.chartLabelsFull">
      </canvas> 
      
      <!-- Last Places -->
      <div class="divider">
        <span>Menor incidência</span>
      </div>
      
      <div class="card" ng-repeat="item in vm.result.lastPlaces">
        <div class="item item-divider">
          <span>{{ item.title }}</span>
        </div>
        <div class="item item-text-wrap result-card last-place">
          <h2>
            <span>Tipo</span>
            <span>{{ item.type }}</span>
          </h2>
          <p>{{ item.description }}</p>
        </div>
        <div class="item item-text-wrap">
          <a ng-click="vm.openTypeDetailModal({{ item.type }})">ver mais detalhes</a>
        </div>
      </div>
      
      <!-- Actions -->
      <div class="divider">
        <span>Ações</span>
      </div>
      
      <div class="button-bar">
        <a class="button button-balanced icon ion-email" ng-click="vm.openEmailModal()"></a>
        <a class="button button-positive icon ion-ios-download" ng-click="vm.savePdf()"></a>
        <a class="button button-assertive icon ion-ios-trash" ng-click="vm.cleanStorage()"></a>
      </div>

  </ion-content>
</ion-view>
